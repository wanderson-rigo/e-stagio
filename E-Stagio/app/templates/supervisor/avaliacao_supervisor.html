{% extends "base_supervisor.html" %}
{% block content %}
<div class="container mt-4">
    <a href="{{ url_for('index_supervisor') }}" class="btn btn-secondary">Voltar <-</a>
    <h2>Avaliação do Supervisor</h2>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.supervisor_nota_interesse.label(class="form-label") }}
            {{ form.supervisor_nota_interesse(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_interesse.errors else "")) }}
            {% for error in form.supervisor_nota_interesse.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_iniciativa.label(class="form-label") }}
            {{ form.supervisor_nota_iniciativa(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_iniciativa.errors else "")) }}
            {% for error in form.supervisor_nota_iniciativa.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_cooperacao.label(class="form-label") }}
            {{ form.supervisor_nota_cooperacao(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_cooperacao.errors else "")) }}
            {% for error in form.supervisor_nota_cooperacao.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_assiduidade_e_pontualidade.label(class="form-label") }}
            {{ form.supervisor_nota_assiduidade_e_pontualidade(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_assiduidade_e_pontualidade.errors else "")) }}
            {% for error in form.supervisor_nota_assiduidade_e_pontualidade.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_criatividade_e_engenhosidade.label(class="form-label") }}
            {{ form.supervisor_nota_criatividade_e_engenhosidade(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_criatividade_e_engenhosidade.errors else "")) }}
            {% for error in form.supervisor_nota_criatividade_e_engenhosidade.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_disciplina.label(class="form-label") }}
            {{ form.supervisor_nota_disciplina(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_disciplina.errors else "")) }}
            {% for error in form.supervisor_nota_disciplina.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_sociabilidade.label(class="form-label") }}
            {{ form.supervisor_nota_sociabilidade(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_sociabilidade.errors else "")) }}
            {% for error in form.supervisor_nota_sociabilidade.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_adaptabilidade.label(class="form-label") }}
            {{ form.supervisor_nota_adaptabilidade(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_adaptabilidade.errors else "")) }}
            {% for error in form.supervisor_nota_adaptabilidade.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_responsabilidade.label(class="form-label") }}
            {{ form.supervisor_nota_responsabilidade(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_responsabilidade.errors else "")) }}
            {% for error in form.supervisor_nota_responsabilidade.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_evolucao_tecnica.label(class="form-label") }}
            {{ form.supervisor_evolucao_tecnica(type="number", class="form-control" + (" is-invalid" if form.supervisor_evolucao_tecnica.errors else "")) }}
            {% for error in form.supervisor_evolucao_tecnica.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_nota_etica.label(class="form-label") }}
            {{ form.supervisor_nota_etica(type="number", class="form-control" + (" is-invalid" if form.supervisor_nota_etica.errors else "")) }}
            {% for error in form.supervisor_nota_etica.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_atividades.label(class="form-label") }}
            {{ form.supervisor_atividades(class="form-control" + (" is-invalid" if form.supervisor_atividades.errors else "")) }}
            {% for error in form.supervisor_atividades.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.supervisor_comentarios.label(class="form-label") }}
            {{ form.supervisor_comentarios(class="form-control" + (" is-invalid" if form.supervisor_comentarios.errors else "")) }}
            {% for error in form.supervisor_comentarios.errors %}
            <div class="invalid-feedback">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-group">
            <label for="media_notas" class="form-label">Média das Notas</label>
            <input type="text" id="media_notas" class="form-control" readonly>
        </div>
        <button type="submit" class="btn btn-primary">Salvar Avaliação</button>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const notaFields = document.querySelectorAll('input[type="number"]');
        const mediaField = document.getElementById('media_notas');

        function calculateMedia() {
            let total = 0;
            let count = 0;

            notaFields.forEach(function (field) {
                const value = parseFloat(field.value);
                if (!isNaN(value)) {
                    total += value;
                    count += 1;
                }
            });

            const media = (count > 0) ? (total / count).toFixed(2) : 0;
            mediaField.value = media;
        }

        notaFields.forEach(function (field) {
            field.addEventListener('input', calculateMedia);
        });

        calculateMedia();
    });
</script>
{% endblock %}
